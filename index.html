<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Planejamento de Viagem</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
    --primary:#1e40af;
    --bg:#f1f5f9;
}
body{
    font-family:Segoe UI, sans-serif;
    background:var(--bg);
    display:flex;
    justify-content:center;
    padding:20px;
}
.box{
    background:white;
    width:100%;
    max-width:520px;
    padding:16px;
    border-radius:12px;
    box-shadow:0 4px 14px rgba(0,0,0,0.08);
}
h1{
    text-align:center;
    font-size:18px;
    margin:0;
}
.countdown{
    text-align:center;
    background:#e0f2fe;
    padding:6px;
    border-radius:6px;
    font-size:13px;
    margin:8px 0 12px 0;
}
.row{
    display:grid;
    grid-template-columns:1fr 80px 50px;
    gap:6px;
    margin-bottom:6px;
}
input{
    padding:6px;
    font-size:12px;
    border-radius:6px;
    border:1px solid #cbd5e1;
}
button{
    padding:6px 10px;
    font-size:12px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
.primary{background:var(--primary);color:white;}
.danger{background:#dc2626;color:white;}
.summary{
    display:flex;
    justify-content:space-between;
    font-weight:bold;
    font-size:13px;
    margin-top:8px;
}
canvas{margin-top:10px;}
</style>
</head>

<body>
<div class="box">
    <h1>‚úàÔ∏è Viagem Gramado</h1>
    <div class="countdown" id="contador"></div>

    <div class="row">
        <input placeholder="Passagem">
        <input type="number" placeholder="R$" id="passagem">
        <input type="checkbox" id="p_passagem">
    </div>

    <div class="row">
        <input placeholder="Hotel">
        <input type="number" placeholder="R$" id="hotel">
        <input type="checkbox" id="p_hotel">
    </div>

    <div class="row">
        <input placeholder="Passeios">
        <input type="number" placeholder="R$" id="passeio">
        <input type="checkbox" id="p_passeio">
    </div>

    <div class="row">
        <input placeholder="Outros">
        <input type="number" placeholder="R$" id="outros">
        <input type="checkbox" id="p_outros">
    </div>

    <div class="summary">
        <span>Total: R$ <span id="total">0</span></span>
        <span>Pago: R$ <span id="pago">0</span></span>
    </div>

    <canvas id="grafico"></canvas>

    <div style="text-align:right;margin-top:10px;">
        <button class="danger" onclick="limpar()">Limpar</button>
    </div>
</div>

<script>
/* üìÖ CONTADOR DA VIAGEM */
const dataViagem = new Date("2027-01-04");
function atualizarContador(){
    const hoje = new Date();
    const diff = dataViagem - hoje;
    const dias = Math.ceil(diff/(1000*60*60*24));
    document.getElementById("contador").innerText =
        dias>0 ? `Faltam ${dias} dias para Gramado!` : "A viagem chegou!";
}
setInterval(atualizarContador,1000);
atualizarContador();

/* üí∞ C√ÅLCULO */
function v(id){ return parseFloat(document.getElementById(id).value)||0 }
function p(id){ return document.getElementById(id).checked }

function calcular(){
    const valores=[
        ["passagem","p_passagem"],
        ["hotel","p_hotel"],
        ["passeio","p_passeio"],
        ["outros","p_outros"]
    ];

    let total=0, pago=0;
    valores.forEach(c=>{
        const val=v(c[0]);
        total+=val;
        if(p(c[1])) pago+=val;
    });

    document.getElementById("total").innerText=total.toFixed(2);
    document.getElementById("pago").innerText=pago.toFixed(2);
    atualizarGrafico();
}
setInterval(calcular,800);

/* üìä GR√ÅFICO */
let chart;
function atualizarGrafico(){
    const ctx=document.getElementById("grafico");
    if(chart) chart.destroy();
    chart=new Chart(ctx,{
        type:'pie',
        data:{
            labels:["Passagem","Hotel","Passeios","Outros"],
            datasets:[{
                data:[v("passagem"),v("hotel"),v("passeio"),v("outros")]
            }]
        }
    });
}

function limpar(){
    location.reload();
}
</script>
</body>
</html>
