<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Controle de Viagens</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #1e3a8a, #2563eb);
    margin: 0;
    padding: 20px;
    color: #111;
}

h1 {
    text-align: center;
    color: white;
}

.container {
    max-width: 1000px;
    margin: auto;
    background: white;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

input, button {
    padding: 10px;
    margin: 6px 0;
    width: 100%;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 14px;
}

button {
    background: #1e40af;
    color: white;
    font-weight: bold;
    border: none;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    transform: scale(1.02);
    background: #1e3a8a;
}

table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
}

th {
    background: #1e40af;
    color: white;
}

th, td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}

.delete-btn {
    background: #dc2626;
    padding: 6px 10px;
    border-radius: 6px;
}

.total {
    font-size: 18px;
    font-weight: bold;
    margin-top: 20px;
    text-align: right;
}

canvas {
    margin-top: 30px;
}
</style>
</head>
<body>

<h1>üåç Viagens do Matheus</h1>

<div class="container">

<h2>Adicionar Passeio</h2>
<input type="text" id="local" placeholder="Local">
<input type="date" id="data">
<input type="number" id="transporte" placeholder="Transporte">
<input type="number" id="alimentacao" placeholder="Alimenta√ß√£o">
<input type="number" id="passeios" placeholder="Passeios/Ingressos">
<input type="number" id="hospedagem" placeholder="Hospedagem">
<input type="text" id="obs" placeholder="Observa√ß√µes">

<button onclick="adicionarViagem()">Adicionar Viagem</button>

<table id="tabela">
<thead>
<tr>
<th>Local</th>
<th>Data</th>
<th>Total</th>
<th>Obs</th>
<th>A√ß√£o</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div class="total" id="totalGeral"></div>

<canvas id="grafico"></canvas>

</div>

<script>
let viagens = JSON.parse(localStorage.getItem("viagens")) || [];

function salvarDados() {
    localStorage.setItem("viagens", JSON.stringify(viagens));
}

function adicionarViagem() {
    const viagem = {
        local: local.value,
        data: data.value,
        transporte: parseFloat(transporte.value) || 0,
        alimentacao: parseFloat(alimentacao.value) || 0,
        passeios: parseFloat(passeios.value) || 0,
        hospedagem: parseFloat(hospedagem.value) || 0,
        obs: obs.value
    };

    viagem.total = viagem.transporte + viagem.alimentacao + viagem.passeios + viagem.hospedagem;
    viagens.push(viagem);
    salvarDados();
    atualizarTela();
    document.querySelectorAll("input").forEach(i => i.value = "");
}

function excluirViagem(index) {
    viagens.splice(index, 1);
    salvarDados();
    atualizarTela();
}

function atualizarTela() {
    const tbody = document.querySelector("#tabela tbody");
    tbody.innerHTML = "";
    let totalGeral = 0;

    viagens.forEach((v, i) => {
        totalGeral += v.total;
        const linha = tbody.insertRow();
        linha.innerHTML = `
            <td>${v.local}</td>
            <td>${v.data}</td>
            <td>R$ ${v.total.toFixed(2)}</td>
            <td>${v.obs}</td>
            <td><button class="delete-btn" onclick="excluirViagem(${i})">X</button></td>
        `;
    });

    document.getElementById("totalGeral").innerText = "Total Geral: R$ " + totalGeral.toFixed(2);
    atualizarGrafico();
}

let grafico;

function atualizarGrafico() {
    const ctx = document.getElementById('grafico').getContext('2d');

    const labels = viagens.map(v => v.local);
    const valores = viagens.map(v => v.total);

    if (grafico) grafico.destroy();

    grafico = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Gastos por Viagem (R$)',
                data: valores
            }]
        }
    });
}

atualizarTela();
</script>

</body>
</html>

